/* Entries.c generated by valac 0.36.7, the Vala compiler
 * generated from Entries.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <gdk/gdk.h>
#include <gio/gio.h>


#define GRANITE_WIDGETS_TYPE_HINTED_ENTRY (granite_widgets_hinted_entry_get_type ())
#define GRANITE_WIDGETS_HINTED_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntry))
#define GRANITE_WIDGETS_HINTED_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntryClass))
#define GRANITE_WIDGETS_IS_HINTED_ENTRY(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_WIDGETS_TYPE_HINTED_ENTRY))
#define GRANITE_WIDGETS_IS_HINTED_ENTRY_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_WIDGETS_TYPE_HINTED_ENTRY))
#define GRANITE_WIDGETS_HINTED_ENTRY_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntryClass))

typedef struct _GraniteWidgetsHintedEntry GraniteWidgetsHintedEntry;
typedef struct _GraniteWidgetsHintedEntryClass GraniteWidgetsHintedEntryClass;
typedef struct _GraniteWidgetsHintedEntryPrivate GraniteWidgetsHintedEntryPrivate;

#define GRANITE_WIDGETS_TYPE_SEARCH_BAR (granite_widgets_search_bar_get_type ())
#define GRANITE_WIDGETS_SEARCH_BAR(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBar))
#define GRANITE_WIDGETS_SEARCH_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBarClass))
#define GRANITE_WIDGETS_IS_SEARCH_BAR(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_WIDGETS_TYPE_SEARCH_BAR))
#define GRANITE_WIDGETS_IS_SEARCH_BAR_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_WIDGETS_TYPE_SEARCH_BAR))
#define GRANITE_WIDGETS_SEARCH_BAR_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBarClass))

typedef struct _GraniteWidgetsSearchBar GraniteWidgetsSearchBar;
typedef struct _GraniteWidgetsSearchBarClass GraniteWidgetsSearchBarClass;
typedef struct _GraniteWidgetsSearchBarPrivate GraniteWidgetsSearchBarPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_free0(var) (var = (g_free (var), NULL))
enum  {
	GRANITE_WIDGETS_SEARCH_BAR_TEXT_CHANGED_PAUSE_SIGNAL,
	GRANITE_WIDGETS_SEARCH_BAR_SEARCH_ICON_RELEASE_SIGNAL,
	GRANITE_WIDGETS_SEARCH_BAR_NUM_SIGNALS
};
static guint granite_widgets_search_bar_signals[GRANITE_WIDGETS_SEARCH_BAR_NUM_SIGNALS] = {0};

struct _GraniteWidgetsHintedEntry {
	GtkEntry parent_instance;
	GraniteWidgetsHintedEntryPrivate * priv;
};

struct _GraniteWidgetsHintedEntryClass {
	GtkEntryClass parent_class;
};

struct _GraniteWidgetsHintedEntryPrivate {
	gboolean _has_clear_icon;
};

struct _GraniteWidgetsSearchBar {
	GraniteWidgetsHintedEntry parent_instance;
	GraniteWidgetsSearchBarPrivate * priv;
};

struct _GraniteWidgetsSearchBarClass {
	GraniteWidgetsHintedEntryClass parent_class;
};

struct _GraniteWidgetsSearchBarPrivate {
	guint timeout_id;
	gint _pause_delay;
};


static gpointer granite_widgets_hinted_entry_parent_class = NULL;
static gpointer granite_widgets_search_bar_parent_class = NULL;

GType granite_widgets_hinted_entry_get_type (void) G_GNUC_CONST;
#define GRANITE_WIDGETS_HINTED_ENTRY_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntryPrivate))
enum  {
	GRANITE_WIDGETS_HINTED_ENTRY_0_PROPERTY,
	GRANITE_WIDGETS_HINTED_ENTRY_HAS_CLEAR_ICON_PROPERTY,
	GRANITE_WIDGETS_HINTED_ENTRY_HINT_STRING_PROPERTY
};
GraniteWidgetsHintedEntry* granite_widgets_hinted_entry_new (const gchar* hint_string);
GraniteWidgetsHintedEntry* granite_widgets_hinted_entry_construct (GType object_type, const gchar* hint_string);
void granite_widgets_hinted_entry_set_hint_string (GraniteWidgetsHintedEntry* self, const gchar* value);
static void __lambda31_ (GraniteWidgetsHintedEntry* self, GtkEntryIconPosition pos);
static void ___lambda31__gtk_entry_icon_release (GtkEntry* _sender, GtkEntryIconPosition p0, GdkEvent* p1, gpointer self);
static void granite_widgets_hinted_entry_manage_icon (GraniteWidgetsHintedEntry* self);
static void _granite_widgets_hinted_entry_manage_icon_gtk_editable_changed (GtkEditable* _sender, gpointer self);
static void _granite_widgets_hinted_entry_manage_icon_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self);
gboolean granite_widgets_hinted_entry_get_has_clear_icon (GraniteWidgetsHintedEntry* self);
void granite_widgets_hinted_entry_hint (GraniteWidgetsHintedEntry* self) G_GNUC_DEPRECATED;
void granite_widgets_hinted_entry_unhint (GraniteWidgetsHintedEntry* self) G_GNUC_DEPRECATED;
gchar* granite_widgets_hinted_entry_get_text (GraniteWidgetsHintedEntry* self) G_GNUC_DEPRECATED;
void granite_widgets_hinted_entry_set_text (GraniteWidgetsHintedEntry* self, const gchar* text) G_GNUC_DEPRECATED;
void granite_widgets_hinted_entry_set_has_clear_icon (GraniteWidgetsHintedEntry* self, gboolean value);
const gchar* granite_widgets_hinted_entry_get_hint_string (GraniteWidgetsHintedEntry* self);
static void granite_widgets_hinted_entry_finalize (GObject * obj);
static void _vala_granite_widgets_hinted_entry_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_granite_widgets_hinted_entry_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);
GType granite_widgets_search_bar_get_type (void) G_GNUC_CONST;
#define GRANITE_WIDGETS_SEARCH_BAR_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBarPrivate))
enum  {
	GRANITE_WIDGETS_SEARCH_BAR_0_PROPERTY,
	GRANITE_WIDGETS_SEARCH_BAR_PAUSE_DELAY_PROPERTY
};
GraniteWidgetsSearchBar* granite_widgets_search_bar_new (const gchar* hint_string);
GraniteWidgetsSearchBar* granite_widgets_search_bar_construct (GType object_type, const gchar* hint_string);
static void granite_widgets_search_bar_on_changed (GraniteWidgetsSearchBar* self);
static void _granite_widgets_search_bar_on_changed_gtk_editable_changed (GtkEditable* _sender, gpointer self);
static void granite_widgets_search_bar_on_icon_release (GraniteWidgetsSearchBar* self, GtkEntryIconPosition position);
static void _granite_widgets_search_bar_on_icon_release_gtk_entry_icon_release (GtkEntry* _sender, GtkEntryIconPosition p0, GdkEvent* p1, gpointer self);
static gboolean __lambda32_ (GraniteWidgetsSearchBar* self, GdkEventKey* e);
static gboolean ___lambda32__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self);
gint granite_widgets_search_bar_get_pause_delay (GraniteWidgetsSearchBar* self);
static gboolean granite_widgets_search_bar_emit_text_changed (GraniteWidgetsSearchBar* self);
static gboolean _granite_widgets_search_bar_emit_text_changed_gsource_func (gpointer self);
void granite_widgets_search_bar_set_pause_delay (GraniteWidgetsSearchBar* self, gint value);
static void granite_widgets_search_bar_finalize (GObject * obj);
static void _vala_granite_widgets_search_bar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec);
static void _vala_granite_widgets_search_bar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec);


/**
         * Makes new hinted entry
         *
         * @param hint_string hint for new entry
         */
static void __lambda31_ (GraniteWidgetsHintedEntry* self, GtkEntryIconPosition pos) {
	GtkEntryIconPosition _tmp0_;
	_tmp0_ = pos;
	if (_tmp0_ == GTK_ENTRY_ICON_SECONDARY) {
		gtk_entry_set_text ((GtkEntry*) self, "");
	}
}


static void ___lambda31__gtk_entry_icon_release (GtkEntry* _sender, GtkEntryIconPosition p0, GdkEvent* p1, gpointer self) {
	__lambda31_ ((GraniteWidgetsHintedEntry*) self, p0);
}


static void _granite_widgets_hinted_entry_manage_icon_gtk_editable_changed (GtkEditable* _sender, gpointer self) {
	granite_widgets_hinted_entry_manage_icon ((GraniteWidgetsHintedEntry*) self);
}


static void _granite_widgets_hinted_entry_manage_icon_g_object_notify (GObject* _sender, GParamSpec* pspec, gpointer self) {
	granite_widgets_hinted_entry_manage_icon ((GraniteWidgetsHintedEntry*) self);
}


GraniteWidgetsHintedEntry* granite_widgets_hinted_entry_construct (GType object_type, const gchar* hint_string) {
	GraniteWidgetsHintedEntry * self = NULL;
	const gchar* _tmp0_;
	g_return_val_if_fail (hint_string != NULL, NULL);
	self = (GraniteWidgetsHintedEntry*) g_object_new (object_type, NULL);
	_tmp0_ = hint_string;
	granite_widgets_hinted_entry_set_hint_string (self, _tmp0_);
	g_signal_connect_object ((GtkEntry*) self, "icon-release", (GCallback) ___lambda31__gtk_entry_icon_release, self, 0);
	g_signal_connect_object ((GtkEditable*) self, "changed", (GCallback) _granite_widgets_hinted_entry_manage_icon_gtk_editable_changed, self, 0);
	g_signal_connect_object ((GObject*) self, "notify::has-clear-icon", (GCallback) _granite_widgets_hinted_entry_manage_icon_g_object_notify, self, 0);
	return self;
}


GraniteWidgetsHintedEntry* granite_widgets_hinted_entry_new (const gchar* hint_string) {
	return granite_widgets_hinted_entry_construct (GRANITE_WIDGETS_TYPE_HINTED_ENTRY, hint_string);
}


static void granite_widgets_hinted_entry_manage_icon (GraniteWidgetsHintedEntry* self) {
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_;
	g_return_if_fail (self != NULL);
	_tmp1_ = self->priv->_has_clear_icon;
	if (_tmp1_) {
		const gchar* _tmp2_;
		const gchar* _tmp3_;
		_tmp2_ = gtk_entry_get_text ((GtkEntry*) self);
		_tmp3_ = _tmp2_;
		_tmp0_ = g_strcmp0 (_tmp3_, "") != 0;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		gtk_entry_set_icon_from_icon_name ((GtkEntry*) self, GTK_ENTRY_ICON_SECONDARY, "edit-clear-symbolic");
	} else {
		gtk_entry_set_icon_from_icon_name ((GtkEntry*) self, GTK_ENTRY_ICON_SECONDARY, NULL);
	}
}


void granite_widgets_hinted_entry_hint (GraniteWidgetsHintedEntry* self) {
	g_return_if_fail (self != NULL);
}


void granite_widgets_hinted_entry_unhint (GraniteWidgetsHintedEntry* self) {
	g_return_if_fail (self != NULL);
}


gchar* granite_widgets_hinted_entry_get_text (GraniteWidgetsHintedEntry* self) {
	gchar* result = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gtk_entry_get_text ((GtkEntry*) self);
	_tmp1_ = _tmp0_;
	_tmp2_ = g_strdup (_tmp1_);
	result = _tmp2_;
	return result;
}


void granite_widgets_hinted_entry_set_text (GraniteWidgetsHintedEntry* self, const gchar* text) {
	const gchar* _tmp0_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (text != NULL);
	_tmp0_ = text;
	gtk_entry_set_text ((GtkEntry*) self, _tmp0_);
}


gboolean granite_widgets_hinted_entry_get_has_clear_icon (GraniteWidgetsHintedEntry* self) {
	gboolean result;
	gboolean _tmp0_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = self->priv->_has_clear_icon;
	result = _tmp0_;
	return result;
}


void granite_widgets_hinted_entry_set_has_clear_icon (GraniteWidgetsHintedEntry* self, gboolean value) {
	g_return_if_fail (self != NULL);
	if (granite_widgets_hinted_entry_get_has_clear_icon (self) != value) {
		gboolean _tmp0_;
		_tmp0_ = value;
		self->priv->_has_clear_icon = _tmp0_;
		g_object_notify ((GObject *) self, "has-clear-icon");
	}
}


const gchar* granite_widgets_hinted_entry_get_hint_string (GraniteWidgetsHintedEntry* self) {
	const gchar* result;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp0_ = gtk_entry_get_placeholder_text ((GtkEntry*) self);
	_tmp1_ = _tmp0_;
	result = _tmp1_;
	return result;
}


void granite_widgets_hinted_entry_set_hint_string (GraniteWidgetsHintedEntry* self, const gchar* value) {
	const gchar* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = value;
	gtk_entry_set_placeholder_text ((GtkEntry*) self, _tmp0_);
	g_object_notify ((GObject *) self, "hint-string");
}


static void granite_widgets_hinted_entry_class_init (GraniteWidgetsHintedEntryClass * klass) {
	granite_widgets_hinted_entry_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (GraniteWidgetsHintedEntryPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_granite_widgets_hinted_entry_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_granite_widgets_hinted_entry_set_property;
	G_OBJECT_CLASS (klass)->finalize = granite_widgets_hinted_entry_finalize;
	g_object_class_install_property (G_OBJECT_CLASS (klass), GRANITE_WIDGETS_HINTED_ENTRY_HAS_CLEAR_ICON_PROPERTY, g_param_spec_boolean ("has-clear-icon", "has-clear-icon", "has-clear-icon", FALSE, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	g_object_class_install_property (G_OBJECT_CLASS (klass), GRANITE_WIDGETS_HINTED_ENTRY_HINT_STRING_PROPERTY, g_param_spec_string ("hint-string", "hint-string", "hint-string", NULL, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
}


static void granite_widgets_hinted_entry_instance_init (GraniteWidgetsHintedEntry * self) {
	self->priv = GRANITE_WIDGETS_HINTED_ENTRY_GET_PRIVATE (self);
	self->priv->_has_clear_icon = FALSE;
}


static void granite_widgets_hinted_entry_finalize (GObject * obj) {
	GraniteWidgetsHintedEntry * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntry);
	G_OBJECT_CLASS (granite_widgets_hinted_entry_parent_class)->finalize (obj);
}


/**
     * A text entry space with hint and clear icon
     */
GType granite_widgets_hinted_entry_get_type (void) {
	static volatile gsize granite_widgets_hinted_entry_type_id__volatile = 0;
	if (g_once_init_enter (&granite_widgets_hinted_entry_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GraniteWidgetsHintedEntryClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) granite_widgets_hinted_entry_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GraniteWidgetsHintedEntry), 0, (GInstanceInitFunc) granite_widgets_hinted_entry_instance_init, NULL };
		GType granite_widgets_hinted_entry_type_id;
		granite_widgets_hinted_entry_type_id = g_type_register_static (gtk_entry_get_type (), "GraniteWidgetsHintedEntry", &g_define_type_info, 0);
		g_once_init_leave (&granite_widgets_hinted_entry_type_id__volatile, granite_widgets_hinted_entry_type_id);
	}
	return granite_widgets_hinted_entry_type_id__volatile;
}


static void _vala_granite_widgets_hinted_entry_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	GraniteWidgetsHintedEntry * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntry);
	switch (property_id) {
		case GRANITE_WIDGETS_HINTED_ENTRY_HAS_CLEAR_ICON_PROPERTY:
		g_value_set_boolean (value, granite_widgets_hinted_entry_get_has_clear_icon (self));
		break;
		case GRANITE_WIDGETS_HINTED_ENTRY_HINT_STRING_PROPERTY:
		g_value_set_string (value, granite_widgets_hinted_entry_get_hint_string (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_granite_widgets_hinted_entry_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	GraniteWidgetsHintedEntry * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GRANITE_WIDGETS_TYPE_HINTED_ENTRY, GraniteWidgetsHintedEntry);
	switch (property_id) {
		case GRANITE_WIDGETS_HINTED_ENTRY_HAS_CLEAR_ICON_PROPERTY:
		granite_widgets_hinted_entry_set_has_clear_icon (self, g_value_get_boolean (value));
		break;
		case GRANITE_WIDGETS_HINTED_ENTRY_HINT_STRING_PROPERTY:
		granite_widgets_hinted_entry_set_hint_string (self, g_value_get_string (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


/**
         * Makes new search bar
         *
         * @param hint_string hint for new search bar
         */
static void _granite_widgets_search_bar_on_changed_gtk_editable_changed (GtkEditable* _sender, gpointer self) {
	granite_widgets_search_bar_on_changed ((GraniteWidgetsSearchBar*) self);
}


static void _granite_widgets_search_bar_on_icon_release_gtk_entry_icon_release (GtkEntry* _sender, GtkEntryIconPosition p0, GdkEvent* p1, gpointer self) {
	granite_widgets_search_bar_on_icon_release ((GraniteWidgetsSearchBar*) self, p0);
}


static gboolean __lambda32_ (GraniteWidgetsSearchBar* self, GdkEventKey* e) {
	gboolean result = FALSE;
	GdkEventKey* _tmp0_;
	guint _tmp1_;
	g_return_val_if_fail (e != NULL, FALSE);
	_tmp0_ = e;
	_tmp1_ = _tmp0_->keyval;
	switch (_tmp1_) {
		case GDK_KEY_Escape:
		{
			gtk_entry_set_text ((GtkEntry*) self, "");
			result = TRUE;
			return result;
		}
		default:
		break;
	}
	result = FALSE;
	return result;
}


static gboolean ___lambda32__gtk_widget_key_press_event (GtkWidget* _sender, GdkEventKey* event, gpointer self) {
	gboolean result;
	result = __lambda32_ ((GraniteWidgetsSearchBar*) self, event);
	return result;
}


GraniteWidgetsSearchBar* granite_widgets_search_bar_construct (GType object_type, const gchar* hint_string) {
	GraniteWidgetsSearchBar * self = NULL;
	const gchar* _tmp0_;
	GThemedIcon* _tmp1_;
	GThemedIcon* _tmp2_;
	g_return_val_if_fail (hint_string != NULL, NULL);
	_tmp0_ = hint_string;
	self = (GraniteWidgetsSearchBar*) granite_widgets_hinted_entry_construct (object_type, _tmp0_);
	granite_widgets_hinted_entry_set_has_clear_icon ((GraniteWidgetsHintedEntry*) self, TRUE);
	_tmp1_ = (GThemedIcon*) g_themed_icon_new_with_default_fallbacks ("edit-find-symbolic");
	_tmp2_ = _tmp1_;
	gtk_entry_set_icon_from_gicon ((GtkEntry*) self, GTK_ENTRY_ICON_PRIMARY, (GIcon*) _tmp2_);
	_g_object_unref0 (_tmp2_);
	g_signal_connect_object ((GtkEditable*) self, "changed", (GCallback) _granite_widgets_search_bar_on_changed_gtk_editable_changed, self, G_CONNECT_AFTER);
	g_signal_connect_object ((GtkEntry*) self, "icon-release", (GCallback) _granite_widgets_search_bar_on_icon_release_gtk_entry_icon_release, self, 0);
	g_signal_connect_object ((GtkWidget*) self, "key-press-event", (GCallback) ___lambda32__gtk_widget_key_press_event, self, 0);
	return self;
}


GraniteWidgetsSearchBar* granite_widgets_search_bar_new (const gchar* hint_string) {
	return granite_widgets_search_bar_construct (GRANITE_WIDGETS_TYPE_SEARCH_BAR, hint_string);
}


static void granite_widgets_search_bar_on_icon_release (GraniteWidgetsSearchBar* self, GtkEntryIconPosition position) {
	GtkEntryIconPosition _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = position;
	if (_tmp0_ == GTK_ENTRY_ICON_PRIMARY) {
		g_signal_emit (self, granite_widgets_search_bar_signals[GRANITE_WIDGETS_SEARCH_BAR_SEARCH_ICON_RELEASE_SIGNAL], 0);
	}
}


static gboolean _granite_widgets_search_bar_emit_text_changed_gsource_func (gpointer self) {
	gboolean result;
	result = granite_widgets_search_bar_emit_text_changed ((GraniteWidgetsSearchBar*) self);
	return result;
}


static void granite_widgets_search_bar_on_changed (GraniteWidgetsSearchBar* self) {
	guint _tmp0_;
	gint _tmp2_;
	guint _tmp3_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->timeout_id;
	if (_tmp0_ > ((guint) 0)) {
		guint _tmp1_;
		_tmp1_ = self->priv->timeout_id;
		g_source_remove (_tmp1_);
	}
	_tmp2_ = self->priv->_pause_delay;
	_tmp3_ = g_timeout_add_full (G_PRIORITY_DEFAULT, (guint) _tmp2_, _granite_widgets_search_bar_emit_text_changed_gsource_func, g_object_ref (self), g_object_unref);
	self->priv->timeout_id = _tmp3_;
}


static gboolean granite_widgets_search_bar_emit_text_changed (GraniteWidgetsSearchBar* self) {
	gboolean result = FALSE;
	gchar* terms = NULL;
	gchar* _tmp0_;
	guint _tmp1_;
	gboolean _tmp2_;
	g_return_val_if_fail (self != NULL, FALSE);
	_tmp0_ = granite_widgets_hinted_entry_get_text ((GraniteWidgetsHintedEntry*) self);
	terms = _tmp0_;
	g_signal_emit (self, granite_widgets_search_bar_signals[GRANITE_WIDGETS_SEARCH_BAR_TEXT_CHANGED_PAUSE_SIGNAL], 0, terms);
	_tmp1_ = self->priv->timeout_id;
	_tmp2_ = g_source_remove (_tmp1_);
	result = _tmp2_;
	_g_free0 (terms);
	return result;
}


gint granite_widgets_search_bar_get_pause_delay (GraniteWidgetsSearchBar* self) {
	gint result;
	gint _tmp0_;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = self->priv->_pause_delay;
	result = _tmp0_;
	return result;
}


void granite_widgets_search_bar_set_pause_delay (GraniteWidgetsSearchBar* self, gint value) {
	g_return_if_fail (self != NULL);
	if (granite_widgets_search_bar_get_pause_delay (self) != value) {
		gint _tmp0_;
		_tmp0_ = value;
		self->priv->_pause_delay = _tmp0_;
		g_object_notify ((GObject *) self, "pause-delay");
	}
}


static void granite_widgets_search_bar_class_init (GraniteWidgetsSearchBarClass * klass) {
	granite_widgets_search_bar_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (GraniteWidgetsSearchBarPrivate));
	G_OBJECT_CLASS (klass)->get_property = _vala_granite_widgets_search_bar_get_property;
	G_OBJECT_CLASS (klass)->set_property = _vala_granite_widgets_search_bar_set_property;
	G_OBJECT_CLASS (klass)->finalize = granite_widgets_search_bar_finalize;
	/**
	         * This value handles how much time (in ms) should pass
	         * after the user stops typing. By default it is set
	         * to 300 ms.
	         */
	g_object_class_install_property (G_OBJECT_CLASS (klass), GRANITE_WIDGETS_SEARCH_BAR_PAUSE_DELAY_PROPERTY, g_param_spec_int ("pause-delay", "pause-delay", "pause-delay", G_MININT, G_MAXINT, 300, G_PARAM_STATIC_NAME | G_PARAM_STATIC_NICK | G_PARAM_STATIC_BLURB | G_PARAM_READABLE | G_PARAM_WRITABLE));
	/**
	         * text_changed () signal is emitted after a short delay,
	         * which depends on pause_delay.
	         * If you need a synchronous signal without any delay,
	         * use changed () method.
	         */
	granite_widgets_search_bar_signals[GRANITE_WIDGETS_SEARCH_BAR_TEXT_CHANGED_PAUSE_SIGNAL] = g_signal_new ("text-changed-pause", GRANITE_WIDGETS_TYPE_SEARCH_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__STRING, G_TYPE_NONE, 1, G_TYPE_STRING);
	/**
	         * search_icon_release () signal is emitted after releasing the mouse button,
	         * which depends on the SearchBar's icon.
	         * It can be useful to show something on the icon press,
	         * we can show a PopOver, for example.
	         */
	granite_widgets_search_bar_signals[GRANITE_WIDGETS_SEARCH_BAR_SEARCH_ICON_RELEASE_SIGNAL] = g_signal_new ("search-icon-release", GRANITE_WIDGETS_TYPE_SEARCH_BAR, G_SIGNAL_RUN_LAST, 0, NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
}


static void granite_widgets_search_bar_instance_init (GraniteWidgetsSearchBar * self) {
	self->priv = GRANITE_WIDGETS_SEARCH_BAR_GET_PRIVATE (self);
	self->priv->timeout_id = (guint) 0;
	self->priv->_pause_delay = 300;
}


static void granite_widgets_search_bar_finalize (GObject * obj) {
	GraniteWidgetsSearchBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBar);
	G_OBJECT_CLASS (granite_widgets_search_bar_parent_class)->finalize (obj);
}


/**
     * A searchbar with hint-text.
     */
GType granite_widgets_search_bar_get_type (void) {
	static volatile gsize granite_widgets_search_bar_type_id__volatile = 0;
	if (g_once_init_enter (&granite_widgets_search_bar_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GraniteWidgetsSearchBarClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) granite_widgets_search_bar_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GraniteWidgetsSearchBar), 0, (GInstanceInitFunc) granite_widgets_search_bar_instance_init, NULL };
		GType granite_widgets_search_bar_type_id;
		granite_widgets_search_bar_type_id = g_type_register_static (GRANITE_WIDGETS_TYPE_HINTED_ENTRY, "GraniteWidgetsSearchBar", &g_define_type_info, 0);
		g_once_init_leave (&granite_widgets_search_bar_type_id__volatile, granite_widgets_search_bar_type_id);
	}
	return granite_widgets_search_bar_type_id__volatile;
}


static void _vala_granite_widgets_search_bar_get_property (GObject * object, guint property_id, GValue * value, GParamSpec * pspec) {
	GraniteWidgetsSearchBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBar);
	switch (property_id) {
		case GRANITE_WIDGETS_SEARCH_BAR_PAUSE_DELAY_PROPERTY:
		g_value_set_int (value, granite_widgets_search_bar_get_pause_delay (self));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}


static void _vala_granite_widgets_search_bar_set_property (GObject * object, guint property_id, const GValue * value, GParamSpec * pspec) {
	GraniteWidgetsSearchBar * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (object, GRANITE_WIDGETS_TYPE_SEARCH_BAR, GraniteWidgetsSearchBar);
	switch (property_id) {
		case GRANITE_WIDGETS_SEARCH_BAR_PAUSE_DELAY_PROPERTY:
		granite_widgets_search_bar_set_pause_delay (self, g_value_get_int (value));
		break;
		default:
		G_OBJECT_WARN_INVALID_PROPERTY_ID (object, property_id, pspec);
		break;
	}
}



