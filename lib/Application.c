/* Application.c generated by valac 0.36.7, the Vala compiler
 * generated from Application.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <gtk/gtk.h>
#include <stdlib.h>
#include <string.h>
#include <sys/utsname.h>
#include <glib/gi18n-lib.h>
#include <gio/gio.h>


#define GRANITE_TYPE_APPLICATION (granite_application_get_type ())
#define GRANITE_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_TYPE_APPLICATION, GraniteApplication))
#define GRANITE_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_TYPE_APPLICATION, GraniteApplicationClass))
#define GRANITE_IS_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_TYPE_APPLICATION))
#define GRANITE_IS_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_TYPE_APPLICATION))
#define GRANITE_APPLICATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_TYPE_APPLICATION, GraniteApplicationClass))

typedef struct _GraniteApplication GraniteApplication;
typedef struct _GraniteApplicationClass GraniteApplicationClass;
typedef struct _GraniteApplicationPrivate GraniteApplicationPrivate;

#define GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG (granite_gtk_patch_about_dialog_get_type ())
#define GRANITE_GTK_PATCH_ABOUT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG, GraniteGtkPatchAboutDialog))
#define GRANITE_GTK_PATCH_ABOUT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG, GraniteGtkPatchAboutDialogClass))
#define GRANITE_GTK_PATCH_IS_ABOUT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG))
#define GRANITE_GTK_PATCH_IS_ABOUT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG))
#define GRANITE_GTK_PATCH_ABOUT_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_GTK_PATCH_TYPE_ABOUT_DIALOG, GraniteGtkPatchAboutDialogClass))

typedef struct _GraniteGtkPatchAboutDialog GraniteGtkPatchAboutDialog;
typedef struct _GraniteGtkPatchAboutDialogClass GraniteGtkPatchAboutDialogClass;

#define GRANITE_WIDGETS_TYPE_ABOUT_DIALOG (granite_widgets_about_dialog_get_type ())
#define GRANITE_WIDGETS_ABOUT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_WIDGETS_TYPE_ABOUT_DIALOG, GraniteWidgetsAboutDialog))
#define GRANITE_WIDGETS_ABOUT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_WIDGETS_TYPE_ABOUT_DIALOG, GraniteWidgetsAboutDialogClass))
#define GRANITE_WIDGETS_IS_ABOUT_DIALOG(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_WIDGETS_TYPE_ABOUT_DIALOG))
#define GRANITE_WIDGETS_IS_ABOUT_DIALOG_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_WIDGETS_TYPE_ABOUT_DIALOG))
#define GRANITE_WIDGETS_ABOUT_DIALOG_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_WIDGETS_TYPE_ABOUT_DIALOG, GraniteWidgetsAboutDialogClass))

typedef struct _GraniteWidgetsAboutDialog GraniteWidgetsAboutDialog;
typedef struct _GraniteWidgetsAboutDialogClass GraniteWidgetsAboutDialogClass;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))

#define GRANITE_SERVICES_TYPE_LOG_LEVEL (granite_services_log_level_get_type ())
#define _g_option_context_free0(var) ((var == NULL) ? NULL : (var = (g_option_context_free (var), NULL)))

#define GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU (granite_widgets_tool_button_with_menu_get_type ())
#define GRANITE_WIDGETS_TOOL_BUTTON_WITH_MENU(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU, GraniteWidgetsToolButtonWithMenu))
#define GRANITE_WIDGETS_TOOL_BUTTON_WITH_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU, GraniteWidgetsToolButtonWithMenuClass))
#define GRANITE_WIDGETS_IS_TOOL_BUTTON_WITH_MENU(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU))
#define GRANITE_WIDGETS_IS_TOOL_BUTTON_WITH_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU))
#define GRANITE_WIDGETS_TOOL_BUTTON_WITH_MENU_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_WIDGETS_TYPE_TOOL_BUTTON_WITH_MENU, GraniteWidgetsToolButtonWithMenuClass))

typedef struct _GraniteWidgetsToolButtonWithMenu GraniteWidgetsToolButtonWithMenu;
typedef struct _GraniteWidgetsToolButtonWithMenuClass GraniteWidgetsToolButtonWithMenuClass;

#define GRANITE_WIDGETS_TYPE_APP_MENU (granite_widgets_app_menu_get_type ())
#define GRANITE_WIDGETS_APP_MENU(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), GRANITE_WIDGETS_TYPE_APP_MENU, GraniteWidgetsAppMenu))
#define GRANITE_WIDGETS_APP_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), GRANITE_WIDGETS_TYPE_APP_MENU, GraniteWidgetsAppMenuClass))
#define GRANITE_WIDGETS_IS_APP_MENU(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), GRANITE_WIDGETS_TYPE_APP_MENU))
#define GRANITE_WIDGETS_IS_APP_MENU_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), GRANITE_WIDGETS_TYPE_APP_MENU))
#define GRANITE_WIDGETS_APP_MENU_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), GRANITE_WIDGETS_TYPE_APP_MENU, GraniteWidgetsAppMenuClass))

typedef struct _GraniteWidgetsAppMenu GraniteWidgetsAppMenu;
typedef struct _GraniteWidgetsAppMenuClass GraniteWidgetsAppMenuClass;
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))
#define _vala_assert(expr, msg) if G_LIKELY (expr) ; else g_assertion_message_expr (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);
#define _vala_return_if_fail(expr, msg) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return; }
#define _vala_return_val_if_fail(expr, msg, val) if G_LIKELY (expr) ; else { g_return_if_fail_warning (G_LOG_DOMAIN, G_STRFUNC, msg); return val; }
#define _vala_warn_if_fail(expr, msg) if G_LIKELY (expr) ; else g_warn_message (G_LOG_DOMAIN, __FILE__, __LINE__, G_STRFUNC, msg);

struct _GraniteApplication {
	GtkApplication parent_instance;
	GraniteApplicationPrivate * priv;
	gchar* build_data_dir;
	gchar* build_pkg_data_dir;
	gchar* build_release_name;
	gchar* build_version;
	gchar* build_version_info;
	gchar* program_name;
	gchar* exec_name;
	gchar* app_copyright;
	gchar* app_years;
	gchar* app_icon;
	gchar* app_launcher;
	gchar* main_url;
	gchar* bug_url;
	gchar* help_url;
	gchar* translate_url;
	gchar** about_authors;
	gint about_authors_length1;
	gchar** about_documenters;
	gint about_documenters_length1;
	gchar** about_artists;
	gint about_artists_length1;
	gchar* about_comments;
	gchar* about_translators;
	gchar* about_license;
	GtkLicense about_license_type;
	GraniteWidgetsAboutDialog* about_dlg;
};

struct _GraniteApplicationClass {
	GtkApplicationClass parent_class;
	void (*set_options) (GraniteApplication* self);
	void (*show_about) (GraniteApplication* self, GtkWidget* parent);
};

struct _GraniteApplicationPrivate {
	GtkWindow* about_dialog_parent;
};

typedef enum  {
	GRANITE_SERVICES_LOG_LEVEL_DEBUG,
	GRANITE_SERVICES_LOG_LEVEL_INFO,
	GRANITE_SERVICES_LOG_LEVEL_NOTIFY,
	GRANITE_SERVICES_LOG_LEVEL_WARN,
	GRANITE_SERVICES_LOG_LEVEL_ERROR,
	GRANITE_SERVICES_LOG_LEVEL_FATAL
} GraniteServicesLogLevel;


extern GraniteApplication* granite_app;
GraniteApplication* granite_app = NULL;
static gpointer granite_application_parent_class = NULL;
extern gboolean granite_application_DEBUG;
gboolean granite_application_DEBUG = FALSE;
extern gboolean granite_application_ABOUT;
gboolean granite_application_ABOUT = FALSE;

GType granite_application_get_type (void) G_GNUC_CONST;
GType granite_gtk_patch_about_dialog_get_type (void) G_GNUC_CONST;
GType granite_widgets_about_dialog_get_type (void) G_GNUC_CONST;
#define GRANITE_APPLICATION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), GRANITE_TYPE_APPLICATION, GraniteApplicationPrivate))
enum  {
	GRANITE_APPLICATION_0_PROPERTY
};
GraniteApplication* granite_application_construct (GType object_type);
gint prctl (gint option, const gchar* arg2, gulong arg3, gulong arg4, gulong arg5);
void granite_services_logger_initialize (const gchar* app_name);
GType granite_services_log_level_get_type (void) G_GNUC_CONST;
GraniteServicesLogLevel granite_services_logger_get_DisplayLevel (void);
void granite_services_logger_set_DisplayLevel (GraniteServicesLogLevel value);
static void granite_application_add_actions (GraniteApplication* self);
gint granite_application_run (GraniteApplication* self, gchar** args, int args_length1);
void granite_application_set_options (GraniteApplication* self);
static void granite_application_handle_about_parameter (GraniteApplication* self);
static void granite_application_real_set_options (GraniteApplication* self);
GType granite_widgets_tool_button_with_menu_get_type (void) G_GNUC_CONST;
GType granite_widgets_app_menu_get_type (void) G_GNUC_CONST;
GraniteWidgetsAppMenu* granite_application_create_appmenu (GraniteApplication* self, GtkMenu* menu);
GraniteWidgetsAppMenu* granite_widgets_app_menu_new_with_app (GraniteApplication* application, GtkMenu* menu);
GraniteWidgetsAppMenu* granite_widgets_app_menu_construct_with_app (GType object_type, GraniteApplication* application, GtkMenu* menu);
void granite_application_show_about (GraniteApplication* self, GtkWidget* parent);
static void _granite_application_show_about_granite_widgets_app_menu_show_about (GraniteWidgetsAppMenu* _sender, GtkWidget* w, gpointer self);
static void granite_application_real_show_about (GraniteApplication* self, GtkWidget* parent);
void granite_widgets_show_about_dialog (GtkWindow* parent, ...);
static void __lambda17_ (GraniteApplication* self);
static void ___lambda17__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void ___lambda18_ (GraniteApplication* self);
static void ____lambda18__gtk_widget_hide (GtkWidget* _sender, gpointer self);
static void ___lambda19_ (GraniteApplication* self);
static void ____lambda19__gtk_application_window_removed (GtkApplication* _sender, GtkWindow* window, gpointer self);
static void granite_application_finalize (GObject * obj);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);

const GOptionEntry GRANITE_APPLICATION_options[3] = {{"debug", 'd', 0, G_OPTION_ARG_NONE, &granite_application_DEBUG, "Enable debug logging", NULL}, {"about", 'a', 0, G_OPTION_ARG_NONE, &granite_application_ABOUT, "Show About dialog", NULL}, {NULL}};

/**
         * This creates a new Application class
         */
static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


GraniteApplication* granite_application_construct (GType object_type) {
	GraniteApplication * self = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	const gchar* _tmp2_;
	GraniteServicesLogLevel _tmp3_;
	GraniteServicesLogLevel _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	struct utsname un = {0};
	struct utsname _tmp7_;
	const gchar* _tmp8_;
	GraniteServicesLogLevel _tmp9_;
	GraniteServicesLogLevel _tmp10_;
	const gchar* _tmp11_;
	const gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	GraniteApplication* _tmp15_;
	self = (GraniteApplication*) g_object_new (object_type, NULL);
	_tmp0_ = self->exec_name;
	prctl (15, _tmp0_, (gulong) 0, (gulong) 0, (gulong) 0);
	_tmp1_ = self->exec_name;
	g_set_prgname (_tmp1_);
	_tmp2_ = self->program_name;
	granite_services_logger_initialize (_tmp2_);
	_tmp3_ = granite_services_logger_get_DisplayLevel ();
	_tmp4_ = _tmp3_;
	granite_services_logger_set_DisplayLevel (GRANITE_SERVICES_LOG_LEVEL_INFO);
	_tmp5_ = self->program_name;
	_tmp6_ = self->build_version;
	g_message ("Application.vala:153: %s version: %s", _tmp5_, _tmp6_);
	uname (&un);
	_tmp7_ = un;
	_tmp8_ = _tmp7_.release;
	g_message ("Application.vala:155: Kernel version: %s", (const gchar*) _tmp8_);
	_tmp9_ = granite_services_logger_get_DisplayLevel ();
	_tmp10_ = _tmp9_;
	granite_services_logger_set_DisplayLevel (GRANITE_SERVICES_LOG_LEVEL_WARN);
	_tmp11_ = self->exec_name;
	_tmp12_ = self->build_data_dir;
	_tmp13_ = g_strconcat (_tmp12_, "/locale", NULL);
	_tmp14_ = _tmp13_;
	bindtextdomain (_tmp11_, _tmp14_);
	_g_free0 (_tmp14_);
	granite_application_add_actions (self);
	_tmp15_ = _g_object_ref0 (self);
	_g_object_unref0 (granite_app);
	granite_app = _tmp15_;
	return self;
}


/**
         * This method runs the application
         *
         * @param args array of arguments
         */
gint granite_application_run (GraniteApplication* self, gchar** args, int args_length1) {
	gint result = 0;
	GOptionContext* context = NULL;
	GOptionContext* _tmp0_;
	GOptionGroup* _tmp1_;
	gboolean _tmp3_;
	gchar** _tmp4_;
	gint _tmp4__length1;
	gint _tmp5_;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, 0);
	_tmp0_ = g_option_context_new ("");
	context = _tmp0_;
	g_option_context_add_main_entries (context, GRANITE_APPLICATION_options, NULL);
	_tmp1_ = gtk_get_option_group (FALSE);
	g_option_context_add_group (context, _tmp1_);
	{
		g_option_context_parse (context, &args_length1, &args, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			goto __catch0_g_error;
		}
	}
	goto __finally0;
	__catch0_g_error:
	{
		g_clear_error (&_inner_error_);
		_inner_error_ = NULL;
	}
	__finally0:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		gint _tmp2_ = 0;
		_g_option_context_free0 (context);
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return _tmp2_;
	}
	granite_application_set_options (self);
	_tmp3_ = granite_application_ABOUT;
	if (_tmp3_) {
		gtk_init (&args_length1, &args);
		granite_application_handle_about_parameter (self);
		result = EXIT_SUCCESS;
		_g_option_context_free0 (context);
		return result;
	}
	_tmp4_ = args;
	_tmp4__length1 = args_length1;
	_tmp5_ = g_application_run ((GApplication*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_application_get_type (), GtkApplication), _tmp4__length1, _tmp4_);
	result = _tmp5_;
	_g_option_context_free0 (context);
	return result;
}


static void granite_application_real_set_options (GraniteApplication* self) {
	gboolean _tmp0_;
	_tmp0_ = granite_application_DEBUG;
	if (_tmp0_) {
		GraniteServicesLogLevel _tmp1_;
		GraniteServicesLogLevel _tmp2_;
		_tmp1_ = granite_services_logger_get_DisplayLevel ();
		_tmp2_ = _tmp1_;
		granite_services_logger_set_DisplayLevel (GRANITE_SERVICES_LOG_LEVEL_DEBUG);
	}
}


void granite_application_set_options (GraniteApplication* self) {
	g_return_if_fail (self != NULL);
	GRANITE_APPLICATION_GET_CLASS (self)->set_options (self);
}


/**
         * This methods creates a new App Menu
         *
         * @param menu the menu to create the App Menu for
         *
         * @return app_menu
         */
static void _granite_application_show_about_granite_widgets_app_menu_show_about (GraniteWidgetsAppMenu* _sender, GtkWidget* w, gpointer self) {
	granite_application_show_about ((GraniteApplication*) self, w);
}


GraniteWidgetsAppMenu* granite_application_create_appmenu (GraniteApplication* self, GtkMenu* menu) {
	GraniteWidgetsAppMenu* result = NULL;
	GraniteWidgetsAppMenu* app_menu = NULL;
	GtkMenu* _tmp0_;
	GraniteWidgetsAppMenu* _tmp1_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (menu != NULL, NULL);
	_tmp0_ = menu;
	_tmp1_ = granite_widgets_app_menu_new_with_app (self, _tmp0_);
	g_object_ref_sink (_tmp1_);
	app_menu = _tmp1_;
	g_signal_connect_object (app_menu, "show-about", (GCallback) _granite_application_show_about_granite_widgets_app_menu_show_about, self, 0);
	result = app_menu;
	return result;
}


/**
         * This method shows the about dialog of this app.
         *
         * @param parent This widget is the window that is calling the about page being created.
         */
static void granite_application_real_show_about (GraniteApplication* self, GtkWidget* parent) {
	GtkWidget* _tmp0_;
	gchar* developers_string = NULL;
	gchar* _tmp1_;
	GtkWidget* _tmp2_;
	const gchar* _tmp3_;
	const gchar* _tmp4_;
	const gchar* _tmp5_;
	const gchar* _tmp6_;
	const gchar* _tmp7_;
	const gchar* _tmp8_;
	gchar* _tmp9_;
	gchar* _tmp10_;
	const gchar* _tmp11_;
	gchar** _tmp12_;
	gint _tmp12__length1;
	gchar** _tmp13_;
	gint _tmp13__length1;
	gchar** _tmp14_;
	gint _tmp14__length1;
	const gchar* _tmp15_;
	const gchar* _tmp16_;
	GtkLicense _tmp17_;
	const gchar* _tmp18_;
	const gchar* _tmp19_;
	const gchar* _tmp20_;
	g_return_if_fail (parent != NULL);
	_tmp0_ = parent;
	_vala_assert (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, gtk_window_get_type ()), "parent is Gtk.Window");
	_tmp1_ = g_strdup (_ ("Developers"));
	developers_string = _tmp1_;
	_tmp2_ = parent;
	_tmp3_ = self->program_name;
	_tmp4_ = self->build_version;
	_tmp5_ = self->app_icon;
	_tmp6_ = self->about_comments;
	_tmp7_ = self->app_years;
	_tmp8_ = self->program_name;
	_tmp9_ = g_strdup_printf ("%s %s %s", _tmp7_, _tmp8_, developers_string);
	_tmp10_ = _tmp9_;
	_tmp11_ = self->main_url;
	_tmp12_ = self->about_authors;
	_tmp12__length1 = self->about_authors_length1;
	_tmp13_ = self->about_documenters;
	_tmp13__length1 = self->about_documenters_length1;
	_tmp14_ = self->about_artists;
	_tmp14__length1 = self->about_artists_length1;
	_tmp15_ = self->about_translators;
	_tmp16_ = self->about_license;
	_tmp17_ = self->about_license_type;
	_tmp18_ = self->help_url;
	_tmp19_ = self->translate_url;
	_tmp20_ = self->bug_url;
	granite_widgets_show_about_dialog (G_TYPE_CHECK_INSTANCE_CAST (_tmp2_, gtk_window_get_type (), GtkWindow), "program_name", _tmp3_, "version", _tmp4_, "logo_icon_name", _tmp5_, "comments", _tmp6_, "copyright", _tmp10_, "website", _tmp11_, "website_label", _ ("Website"), "authors", _tmp12_, "documenters", _tmp13_, "artists", _tmp14_, "translator_credits", _tmp15_, "license", _tmp16_, "license_type", _tmp17_, "help", _tmp18_, "translate", _tmp19_, "bug", _tmp20_, NULL);
	_g_free0 (_tmp10_);
	_g_free0 (developers_string);
}


void granite_application_show_about (GraniteApplication* self, GtkWidget* parent) {
	g_return_if_fail (self != NULL);
	GRANITE_APPLICATION_GET_CLASS (self)->show_about (self, parent);
}


static void __lambda17_ (GraniteApplication* self) {
	GtkWindow* _tmp0_;
	GtkWindow* _tmp2_;
	g_application_hold ((GApplication*) self);
	g_debug ("Application.vala:277: The show-about-dialog action was activated");
	_tmp0_ = self->priv->about_dialog_parent;
	if (_tmp0_ == NULL) {
		GtkWindow* _tmp1_;
		_tmp1_ = (GtkWindow*) gtk_window_new (GTK_WINDOW_TOPLEVEL);
		g_object_ref_sink (_tmp1_);
		_g_object_unref0 (self->priv->about_dialog_parent);
		self->priv->about_dialog_parent = _tmp1_;
	}
	_tmp2_ = self->priv->about_dialog_parent;
	granite_application_show_about (self, (GtkWidget*) _tmp2_);
	g_application_release ((GApplication*) self);
}


static void ___lambda17__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda17_ ((GraniteApplication*) self);
}


static void granite_application_add_actions (GraniteApplication* self) {
	GSimpleAction* show_about_action = NULL;
	GSimpleAction* _tmp0_;
	g_return_if_fail (self != NULL);
	_tmp0_ = g_simple_action_new ("show-about-dialog", NULL);
	show_about_action = _tmp0_;
	g_signal_connect_object (show_about_action, "activate", (GCallback) ___lambda17__g_simple_action_activate, self, 0);
	g_action_map_add_action ((GActionMap*) self, (GAction*) show_about_action);
	_g_object_unref0 (show_about_action);
}


static void ___lambda18_ (GraniteApplication* self) {
	GList* _tmp0_;
	_tmp0_ = gtk_application_get_windows ((GtkApplication*) self);
	if (_tmp0_ == NULL) {
		gtk_main_quit ();
	}
}


static void ____lambda18__gtk_widget_hide (GtkWidget* _sender, gpointer self) {
	___lambda18_ ((GraniteApplication*) self);
}


static void ___lambda19_ (GraniteApplication* self) {
	GList* _tmp0_;
	_tmp0_ = gtk_application_get_windows ((GtkApplication*) self);
	if (_tmp0_ == NULL) {
		gtk_main_quit ();
	}
}


static void ____lambda19__gtk_application_window_removed (GtkApplication* _sender, GtkWindow* window, gpointer self) {
	___lambda19_ ((GraniteApplication*) self);
}


static void granite_application_handle_about_parameter (GraniteApplication* self) {
	gboolean _tmp2_;
	gboolean _tmp3_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	{
		g_application_register ((GApplication*) self, NULL, &_inner_error_);
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			goto __catch1_g_error;
		}
	}
	goto __finally1;
	__catch1_g_error:
	{
		GError* _error_ = NULL;
		GError* _tmp0_;
		const gchar* _tmp1_;
		_error_ = _inner_error_;
		_inner_error_ = NULL;
		_tmp0_ = _error_;
		_tmp1_ = _tmp0_->message;
		g_warning ("Application.vala:294: Couldn't register application: %s", _tmp1_);
		_g_error_free0 (_error_);
	}
	__finally1:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return;
	}
	g_action_group_activate_action ((GActionGroup*) self, "show-about-dialog", NULL);
	_tmp2_ = g_application_get_is_remote ((GApplication*) self);
	_tmp3_ = _tmp2_;
	if (!_tmp3_) {
		GtkWidget* about_dialog = NULL;
		GtkWindow* _tmp4_;
		gconstpointer _tmp5_;
		GtkWidget* _tmp6_;
		GtkWidget* _tmp7_;
		_tmp4_ = self->priv->about_dialog_parent;
		_tmp5_ = g_object_get_data ((GObject*) _tmp4_, "gtk-about-dialog");
		_tmp6_ = _g_object_ref0 ((GtkWidget*) _tmp5_);
		about_dialog = _tmp6_;
		_tmp7_ = about_dialog;
		g_signal_connect_object (_tmp7_, "hide", (GCallback) ____lambda18__gtk_widget_hide, self, 0);
		g_signal_connect_object ((GtkApplication*) self, "window-removed", (GCallback) ____lambda19__gtk_application_window_removed, self, 0);
		gtk_main ();
		_g_object_unref0 (about_dialog);
	}
}


static void granite_application_class_init (GraniteApplicationClass * klass) {
	granite_application_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (GraniteApplicationPrivate));
	((GraniteApplicationClass *) klass)->set_options = (void (*) (GraniteApplication *)) granite_application_real_set_options;
	((GraniteApplicationClass *) klass)->show_about = (void (*) (GraniteApplication *, GtkWidget*)) granite_application_real_show_about;
	G_OBJECT_CLASS (klass)->finalize = granite_application_finalize;
}


static void granite_application_instance_init (GraniteApplication * self) {
	gchar** _tmp0_;
	gchar** _tmp1_;
	gchar** _tmp2_;
	self->priv = GRANITE_APPLICATION_GET_PRIVATE (self);
	_tmp0_ = g_new0 (gchar*, 0 + 1);
	self->about_authors = _tmp0_;
	self->about_authors_length1 = 0;
	_tmp1_ = g_new0 (gchar*, 0 + 1);
	self->about_documenters = _tmp1_;
	self->about_documenters_length1 = 0;
	_tmp2_ = g_new0 (gchar*, 0 + 1);
	self->about_artists = _tmp2_;
	self->about_artists_length1 = 0;
	self->priv->about_dialog_parent = NULL;
}


static void granite_application_finalize (GObject * obj) {
	GraniteApplication * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, GRANITE_TYPE_APPLICATION, GraniteApplication);
	_g_free0 (self->build_data_dir);
	_g_free0 (self->build_pkg_data_dir);
	_g_free0 (self->build_release_name);
	_g_free0 (self->build_version);
	_g_free0 (self->build_version_info);
	_g_free0 (self->program_name);
	_g_free0 (self->exec_name);
	_g_free0 (self->app_copyright);
	_g_free0 (self->app_years);
	_g_free0 (self->app_icon);
	_g_free0 (self->app_launcher);
	_g_free0 (self->main_url);
	_g_free0 (self->bug_url);
	_g_free0 (self->help_url);
	_g_free0 (self->translate_url);
	self->about_authors = (_vala_array_free (self->about_authors, self->about_authors_length1, (GDestroyNotify) g_free), NULL);
	self->about_documenters = (_vala_array_free (self->about_documenters, self->about_documenters_length1, (GDestroyNotify) g_free), NULL);
	self->about_artists = (_vala_array_free (self->about_artists, self->about_artists_length1, (GDestroyNotify) g_free), NULL);
	_g_free0 (self->about_comments);
	_g_free0 (self->about_translators);
	_g_free0 (self->about_license);
	_g_object_unref0 (self->about_dlg);
	_g_object_unref0 (self->priv->about_dialog_parent);
	G_OBJECT_CLASS (granite_application_parent_class)->finalize (obj);
}


/**
     * This is the base class for all Granite-based apps. It has methods that help
     * to create a great deal of an app's functionality.
     */
GType granite_application_get_type (void) {
	static volatile gsize granite_application_type_id__volatile = 0;
	if (g_once_init_enter (&granite_application_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (GraniteApplicationClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) granite_application_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (GraniteApplication), 0, (GInstanceInitFunc) granite_application_instance_init, NULL };
		GType granite_application_type_id;
		granite_application_type_id = g_type_register_static (gtk_application_get_type (), "GraniteApplication", &g_define_type_info, G_TYPE_FLAG_ABSTRACT);
		g_once_init_leave (&granite_application_type_id__volatile, granite_application_type_id);
	}
	return granite_application_type_id__volatile;
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



